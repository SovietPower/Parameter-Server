
## LR

### 启动

需要设置的额外参数（在 local.py 中修改，避免在命令行中设太多参数）：

- `DATA_DIR`：样本数据所在父目录和模型的输出位置。
- `NUM_FEATURE`：特征数量。
- `BATCH_SIZE`：每轮训练的批次大小。默认 -1 为 BGD。
- `ITERATION`：总训练轮数。
- `TEST_PERIOD`：每隔多少轮，进行一次正确率测试。默认为0，仅在最后进行。

- `SYNC_MODE`：同步模式。0：同步；1：异步。
- `LEARNING_RATE`：学习率。
- `C`：正则化系数。

可选参数：

- `USE_OLD_MODEL`：是否使用已有模型继续训练。默认不使用。如果使用，则通过该参数指定模型文件名称（完整路径为`DATA_DIR/model/USE_OLD_MODEL`）。
- `USE_ADAM`：是否使用 Adam 优化学习率。默认不使用，设为任意值启用。

设置完参数后，运行：

```bash
# 使用 PS 进行逻辑回归
python .\local.py -ns=1 -nw=4 -exec='.\exe\LR_ps.exe' -lr

# 不使用 PS 进行逻辑回归（ns, nw 设置多少无所谓，但是是必需参数）
python .\local.py -ns=0 -nw=0 -exec='.\exe\LR_normal.exe' -lr_normal
```

将从`DATA_DIR/train`中读取训练数据集，从`DATA_DIR/test`中读取测试数据集。

最终的模型参数与每个 worker 本地的模型参数会输出到`DATA_DIR/model`下，格式为：

```
模型迭代次数
特征数量
特征...
```

注：不使用多 customer。

### 介绍

**数据集**

本数据集共有48842条数据，每条数据从原始特征的14个转换成123个，并以2：1的比例分为训练集和测试集，其中a9a为训练集，用来训练分类器模型；a9a-t是测试集，用来预测模型的分类效果。它共有两个类别，标签分别用-1和1表示，标签的含义是一个人一年的薪资是否超过50K，1表示超过50K，-1表示不超过50K。


**数据处理**

编码...

在使用 PS 进行分布式训练时，训练集会被分成四份，供四个 worker 同时进行训练。
当每个 worker 在自己的训练集上完成一轮迭代并上传梯度后，整个系统完成一轮迭代。


